CeruleanCity_Gym_MapScripts::
	.byte 0

CeruleanCity_Gym_EventScript_Misty::
	famechecker FAMECHECKER_MISTY, FCPICKSTATE_COLORED, UpdatePickStateFromSpecialVar8005
	trainerbattle_single TRAINER_LEADER_MISTY, CeruleanCity_Gym_Text_MistyIntro, CeruleanCity_Gym_Text_MistyDefeat, CeruleanCity_Gym_EventScript_MistyDefeated, NO_MUSIC
	goto_if_unset FLAG_GOT_TM03_FROM_MISTY, CeruleanCity_Gym_EventScript_GiveTM03
	msgbox CeruleanCity_Gym_Text_ExplainTM03
	release
	end

CeruleanCity_Gym_EventScript_MistyDefeated::
	famechecker FAMECHECKER_MISTY, 1
	setflag FLAG_DEFEATED_MISTY
	setflag FLAG_BADGE02_GET
	setrespawn HEAL_LOCATION_CERULEAN_CITY
	set_gym_trainers 2
	goto CeruleanCity_Gym_EventScript_GiveTM03
	end

CeruleanCity_Gym_EventScript_Bowie::
	lock
	faceplayer
	setvar VAR_TEMP_1, SPECIES_HOUNDOOM
	givemon_msg CeruleanCity_Gym_Text_BowieIntro, SPECIES_HOUNDOOM, 20
	@ Wild battle script style
	waitse
	playmoncry SPECIES_HOUNDOOM, CRY_MODE_ENCOUNTER
	delay 40
	waitmoncry
	setwildbattle SPECIES_HOUNDOOM, 20
	setflag FLAG_SYS_CTRL_OBJ_CONFIRM
	special BattleSetup_StartLegendaryBattle
	waitstate
	clearflag FLAG_SYS_CTRL_OBJ_CONFIRM
	specialvar VAR_RESULT, GetBattleOutcome
	goto_if_eq VAR_RESULT, B_OUTCOME_CAUGHT, CeruleanCity_Gym_EventScript_CaughtBowie
	goto_if_eq VAR_RESULT, B_OUTCOME_WON, CeruleanCity_Gym_EventScript_DefeatedBowie
	goto_if_eq VAR_RESULT, B_OUTCOME_RAN, CeruleanCity_Gym_EventScript_DefeatedBowie
	goto_if_eq VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, CeruleanCity_Gym_EventScript_DefeatedBowie
	release
	end

CeruleanCity_Gym_EventScript_CaughtBowie::
	setflag FLAG_HIDE_CERULEAN_GYM_BOWIE
	setflag FLAG_CAUGHT_BOWIE
	removeobject VAR_LAST_TALKED
	release
	end

CeruleanCity_Gym_EventScript_DefeatedBowie::
	setflag FLAG_HIDE_CERULEAN_GYM_BOWIE
	removeobject VAR_LAST_TALKED
	release
	end

CeruleanCity_Gym_EventScript_GiveTM03::
	goto_if_set FLAG_CAUGHT_BOWIE, CeruleanCity_Gym_EventScript_BryonyCaughtBowie
	goto_if_set FLAG_HIDE_CERULEAN_GYM_BOWIE, CeruleanCity_Gym_EventScript_BryonyBeatBowie
	msgbox CeruleanCity_Gym_Text_MistyDefeat
	goto CeruleanCity_Gym_EventScript_FinishGiveTM03
	end

CeruleanCity_Gym_EventScript_BryonyCaughtBowie::
	msgbox CeruleanCity_Gym_Text_BryonyPostBattleCaughtBowie
	goto CeruleanCity_Gym_EventScript_FinishGiveTM03
	end

CeruleanCity_Gym_EventScript_BryonyBeatBowie::
	msgbox CeruleanCity_Gym_Text_BryonyPostBattleBeatBowie
	goto CeruleanCity_Gym_EventScript_FinishGiveTM03
	end

CeruleanCity_Gym_EventScript_FinishGiveTM03::
	msgbox CeruleanCity_Gym_Text_ExplainCascadeBadge
	checkitemspace ITEM_TM03
	goto_if_eq VAR_RESULT, FALSE, CeruleanCity_Gym_EventScript_NoRoomForTM03
	giveitem_msg CeruleanCity_Gym_Text_ReceivedTM03FromMisty, ITEM_TM03
	setflag FLAG_GOT_TM03_FROM_MISTY
	msgbox CeruleanCity_Gym_Text_ExplainTM03
	release
	end

CeruleanCity_Gym_EventScript_NoRoomForTM03::
	msgbox CeruleanCity_Gym_Text_BetterMakeRoomForThis
	release
	end

CeruleanCity_Gym_EventScript_Diana::
	msgbox CeruleanCity_Gym_Text_DianaPostBattle, MSGBOX_NPC
	end

CeruleanCity_Gym_EventScript_Luis::
	msgbox CeruleanCity_Gym_Text_LuisPostBattle, MSGBOX_NPC
	end

CeruleanCity_Gym_EventScript_GymGuy::
	lock
	faceplayer
	goto_if_set FLAG_DEFEATED_MISTY, CeruleanCity_Gym_EventScript_GymGuyPostVictory
	goto_if_set FLAG_GOT_OLLIE_GIFT_CERULEAN, CeruleanCity_Gym_EventScript_GymGuyAdvice
	msgbox CeruleanCity_Gym_Text_OllieIntro
	checkitemspace ITEM_SWEET_HEART, 1
	goto_if_eq VAR_RESULT, FALSE, CeruleanCity_Gym_EventScript_NoRoomForGift
	giveitem_msg CeruleanCity_Gym_Text_OllieGiftCerulean, ITEM_SWEET_HEART, 1
	setflag FLAG_GOT_OLLIE_GIFT_CERULEAN
	goto CeruleanCity_Gym_EventScript_GymGuyAdvice
	end

CeruleanCity_Gym_EventScript_NoRoomForGift::
	msgbox CeruleanCity_Gym_Text_NoRoomForGift
	release
	end

CeruleanCity_Gym_EventScript_GymGuyPostVictory::
	msgbox CeruleanCity_Gym_Text_OlliePostVictory
	release
	end

CeruleanCity_Gym_EventScript_GymGuyAdvice::
	msgbox CeruleanCity_Gym_Text_OllieAdvice
	release
	end

CeruleanCity_Gym_EventScript_GymStatue::
	lockall
	goto_if_set FLAG_BADGE02_GET, CeruleanCity_Gym_EventScript_GymStatuePostVictory
	msgbox CeruleanCity_Gym_Text_GymStatue
	releaseall
	end

CeruleanCity_Gym_EventScript_GymStatuePostVictory::
	msgbox CeruleanCity_Gym_Text_GymStatuePlayerWon
	releaseall
	end
